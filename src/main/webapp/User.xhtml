<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<head>
    <ui:composition template="tameplates/MainTemplate.xhtml">

        <ui:define name="top">
            <h:form>
                <h:commandButton value="Get all" action="#{userBean.getAll}"/>
            </h:form>
            <h:form>
                <h:outputText value="Login"/>
                <h:inputText value="#{userBean.findLogin}" validatorMessage="Invalid login..." id="findLogin">
                    <f:validateRegex pattern="^[A-Za-z][A-Za-z0-9_]+$"/>
                </h:inputText>
                <h:commandButton value="Get all with" action="#{userBean.getAllLogin}"/>
                <h:commandButton value="Get user" action="#{userBean.getUser}"/>
                <h:message for="findLogin"/>
            </h:form>
        </ui:define>

        <ui:define name="content">
            <h:dataTable value="#{userBean.users}" var="users">
                <h:column>
                    <f:facet name="header">Login</f:facet>
                    #{users.login}
                </h:column>
                <h:column>
                    <f:facet name="header">Name</f:facet>
                    #{users.name}
                </h:column>
                <h:column>
                    <f:facet name="header">AccessLevel</f:facet>
                    #{users.accessLevel}
                </h:column>
                <h:column>
                    <f:facet name="header">IsActive</f:facet>
                    #{users.active}
                </h:column>
            </h:dataTable>
        </ui:define>

        <ui:define name="bottom">
            <h:form >
                <h:outputText value="Login"/>
                <h:inputText value="#{userBean.addLogin}" validatorMessage="Invalid login..." id="addLogin">
                    <f:validateRegex pattern="^[A-Za-z][A-Za-z0-9_]+$"/>
                </h:inputText>
                <h:outputText value="Name"/>
                <h:inputText value="#{userBean.addName}" validatorMessage="Invalid name..." id="addName">
                    <f:validateRegex pattern="^[a-zA-Z ,.'-]+$"/>
                </h:inputText>
                <h:outputText value="Access Level"/>
                <h:inputText value="#{userBean.addAccessLevel}" validatorMessage="Invalid access level..." id="addAccessLvl">
                    <f:validateRegex pattern="[1-3]"/>
                </h:inputText>
                <h:commandButton action="#{userBean.addUser}" value="Create"/>
                <h:message for="addLogin"/>
                <h:message for="addName"/>
                <h:message for="addAccessLvl"/>
            </h:form>

            <h:form>
                <h:outputText value="Login"/>
                <h:inputText value="#{userBean.updateLogin}" validatorMessage="Invalid login..." id="updateLogin">
                    <f:validateRegex pattern="^[A-Za-z][A-Za-z0-9_]+$"/>
                </h:inputText>
                <h:outputText value="Name"/>
                <h:inputText value="#{userBean.updateName}" validatorMessage="Invalid name..." id="updateName">
                    <f:validateRegex pattern="^[a-zA-Z ,.'-]+$"/>
                </h:inputText>
                <h:commandButton action="#{userBean.updateUser}" value="Update"/>
                <h:message for="updateLogin"/>
                <h:message for="updateName"/>
            </h:form>

            <h:form>
                <h:outputText value="Login"/>
                <h:inputText value="#{userBean.changeLogin}" validatorMessage="Invalid login..." id="changeLogin">
                    <f:validateRegex pattern="^[A-Za-z][A-Za-z0-9_]+$"/>
                </h:inputText>
                <h:commandButton action="#{userBean.changeLoginActivity}" value="Change activity"/>
                <h:message for="changeLogin"/>
            </h:form>
        </ui:define>

        <ui:define name="left">
            <h:form>
                <h:outputLink value="Main.xhtml">Main</h:outputLink>
            </h:form>
            <h:form>
                <h:outputLink value="Resource.xhtml">Resource</h:outputLink>
            </h:form>
            <h:form>
                <h:outputLink value="Allocation.xhtml">Allocation</h:outputLink>
            </h:form>
        </ui:define>

    </ui:composition>
</head>
</html>
